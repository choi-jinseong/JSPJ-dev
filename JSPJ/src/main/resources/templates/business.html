<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Welcome</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, Helvetica, sans-serif;
            background: #f6f7fb;
        }

        /* í—¤ë” */
		header {
		    background: #f2f7f8; 
		    color: #333;       
		    padding: 15px 20px;
		    font-size: 22px;
		    font-weight: bold;
		    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
		
		    display: flex;
		    align-items: center;
		    gap: 40px; /* ë¡œê³ ì™€ ë©”ë‰´ ê°„ ê°„ê²© */
		}
		
		/* ë©”ë‰´ ì˜ì—­ */
		.top_menu {
		    display: flex;
		    align-items: center;
		    gap: 20px; /* ë©”ë‰´ ì•„ì´í…œ ê°„ ê°„ê²© */
		}
		
		.top_menu a {
		    text-decoration: none;
		    color: #4a6cf7; /* ë©”ë‰´ ê¸€ì”¨ íŒŒë€ìƒ‰ */
		    font-weight: 500;
		    transition: 0.2s;
		}
		
		.top_menu a:hover {
		    color: #1a40d1; /* í˜¸ë²„ ì‹œ ì§„í•œ íŒŒë‘ */
		}


        /* ì½˜í…ì¸  */
        .content {
            max-width: 1000px;
            margin: 30px auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            text-align: center;
        }

        .content h2 {
            margin-bottom: 20px;
            color: #333;
        }

		.businessArea {
            max-width: 850px;
            margin: 30px auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            text-align: center;
        }
        
        .pwArea {
            max-width: 600px;
            margin: 30px auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            text-align: center;
        }
        
        
        /* í‘¸í„° */
        footer {
            margin-top: 40px;
            background: #eee;
            padding: 10px;
            text-align: center;
            color: #555;
            font-size: 14px;
        }
        
        
        /* ì…€ë ‰íŠ¸ ë°•ìŠ¤ ê³µí†µ ìŠ¤íƒ€ì¼ */
		select {
		    width: 150px;
		    padding: 8px;
		    border-radius: 6px;
		    border: 1px solid #ccc;
		    background: white;
		    font-size: 14px;
		    transition: 0.2s ease-in-out;
		    cursor: pointer;
		}
		
		/* hover ì‹œ ë¶€ë“œëŸ½ê²Œ */
		select:hover {
		    border-color: #4a6cf7;
		    background: #f0f4ff;
		}
		
		/* í¬ì»¤ìŠ¤ ì‹œ */
		select:focus {
		    outline: none;
		    border-color: #4a6cf7;
		    box-shadow: 0 0 5px rgba(74,108,247,0.4);
		}


		/* í•œ ì¤„ì„ ê°€ë¡œë¡œ 2ì¹¸ ì •ë ¬í•˜ëŠ” ì˜ì—­ */
		.form-row {
		    display: flex;
		    justify-content: space-between;
		    align-items: center;
		    margin-top: 25px;
		}
		
		/* ë¼ë²¨ + input ë¬¶ìŒ */
		.form-group {
		    width: 45%;
		    display: flex;
		    align-items: center; 
		}
		
		/* ë¼ë²¨ */
		.form-group label {
		    width: 100px; 
		    margin-right: 10px;
		    font-weight: bold;
		    text-align: right;
		}
		
		.form-group input,
		.form-group select {
		    flex: 1;     /* ë‚¨ì€ ê³µê°„ ëª¨ë‘ ì‚¬ìš© */
		    padding: 8px;
		    border-radius: 6px;
		    border: 1px solid #ccc;
		}
		
		.idChk-btn:disabled {
		    background: #c2c2c2;
		    cursor: not-allowed;
		}
    </style>
</head>

<body>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script>

	/* íšŒì›ê°€ì… */
	function regist(){
		
	   /* ì•„ì´ë”” ì¤‘ë³µê²€ì‚¬í•œì§€ í™•ì¸ */
	   if ($("#idChkYn").val() !== "1") {
	        alert("ì•„ì´ë”” ì¤‘ë³µê²€ì‚¬ë¥¼ ì§„í–‰í•´ì£¼ì„¸ìš”.");
	        return;
	    }
	   
	   /* ë¹„ë°€ë²ˆí˜¸í™•ì¸  */
	   if($("#userPw").val() != $("#userRePw").val()){
		   alert("ë¹„ë°€ë²ˆí˜¸ì™€ í™•ì¸ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
		   return;
	   }
	   
	   if( $('#userId').val() == "" || $('#userId').val() == null){
		   alert("ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
		   return;
	   }
	   
	   if( $('#userPw').val() == "" || $('#userPw').val() == null){
		   alert("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
		   return;
	   }
	   
	   if( $('#userNm').val() == "" || $('#userNm').val() == null){
		   alert("ì‚¬ìš©ìì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");
		   return;
	   }
	   
	    var dataInfo = {};
		 // input ê°’ ê°€ì ¸ì˜¤ê¸°
	    var userId = $('#userId').val();
	    var userPw = $('#userPw').val();
	    var userNm = $('#userNm').val();
	    var userEmail = $('#userEmail').val();
	    var userBirth = $('#userBirth').val();
	    var userTelNo = $('#userTelNo').val();
	    
	    dataInfo.id = userId;
	    dataInfo.pw = userPw;
	    dataInfo.name = userNm;
	    dataInfo.email = userEmail;
	    dataInfo.birth = userBirth;
	    dataInfo.telNo =  userTelNo;
	    
	    $.ajax({
	        url: '/userRegist',          
	        type: 'POST',
	        data: JSON.stringify(dataInfo),
	        contentType: 'application/json',
	        success: function(data) {
	            if(data == "success"){
	                alert('íšŒì›ê°€ì… ì„±ê³µ! ê°€ì…í•˜ì‹  ì•„ì´ë””ë¡œ ë¡œê·¸ì¸ ë¶€íƒ ë“œë¦½ë‹ˆë‹¤.');
	                location.href="/"; 
	            } else {
	                alert('ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + data.message);
	            }
	        },
	        error: function(xhr, status, error) {
	            console.error('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜:', error);
	        }
	    });
	}
	
	/* ì•„ì´ë””ì¤‘ë³µê²€ì‚¬ */
	function idChk(){
		 // input ê°’ ê°€ì ¸ì˜¤ê¸°
		
	    var userId = $('#userId').val();
	    
	    $.ajax({
	        url: '/userIdChk',          
	        type: 'POST',
	        data: JSON.stringify({ id: userId}),
	        contentType: 'application/json',
	        success: function(data) {
	            if(data == "success"){
	            	// ì„±ê³µ ì‹œ
	                $('#userId').prop('disabled', true);
	                $('#idChkBtn').prop('disabled', true);
	                // ğŸ”¥ íˆë“ ê°’: ì¤‘ë³µê²€ì‚¬ ì„±ê³µ
	                $('#idChkYn').val('1');
	                
	                $('#idMsg')
	                    .text('í•´ë‹¹ ì•„ì´ë””ëŠ” ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.')
	                    .css('color', 'green')
	                    .show();
	            } else {
	                // ì‹¤íŒ¨ ì‹œ
	                $('#idMsg')
	                    .text('ì¤‘ë³µëœ ì•„ì´ë””ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.')
	                    .css('color', 'red')
	                    .show();
	                // ì‹¤íŒ¨ ì‹œ
	                $('#idChkYn').val('0');  // ğŸ”¥ ì‹¤íŒ¨ í‘œì‹œ

	            }
	        },
	        error: function(xhr, status, error) {
	            console.error('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜:', error);
	        }
	    });		
	}
</script>

    <!-- í—¤ë” -->
    <header>
        <div>
        	<span class="image main"><img src="/resources/images/pearl/main/jspj.png" alt="" style="width: 133px;" /></span>
        </div>
       
	    <!-- ë©”ë‰´ -->
	    <div class="top_menu">
	        <th:block th:each="item : ${menuList}">
	            <a href="${item.menuUrl}" style="color:black;" th:text="${item.title != null ? item.title : 'Untitled'}"></a>
	        </th:block>
	    </div>
        
    </header>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
	 <div class="content">
	    <h2>ë“±ë¡í˜„í™©</h2>
	
	    <!-- íšŒì›ê°€ì… -->
		 <div class="businessArea">
	
		    <!-- 1ë²ˆì§¸ ì¤„ : ID / ì´ë¦„ -->
		    <div class="form-row">
		        <div class="form-group" style="flex-direction: column; align-items: flex-start; width: 45%;">
				    <div style="display: flex; width: 100%; align-items: center;">
				        <label for="userId" style="width: 100px; margin-right: 10px;">ID</label>
				        <input type="text" id="userId" name="userId" placeholder="ì•„ì´ë”” ì…ë ¥" style="flex: 1;">
				        <button class="idChk-btn" onclick="idChk()">ì¤‘ë³µê²€ì‚¬</button>
				    </div>
				
				    <!-- ë©”ì‹œì§€ê°€ ë°”ë¡œ ì•„ë˜ í‘œì‹œ -->
				    <small id="idMsg"
				           style="color:green; margin-left:110px; margin-top:4px; display:none; font-size:13px;">
				    </small>
				
				    <input type="hidden" id="idChkYn" name="idChkYn" value="0">
				</div>
		        <div class="form-group">
		            <label for="userNm">ì´ë¦„</label>
		            <input type="text" id="userNm" name="userNm" placeholder="ì´ë¦„ ì…ë ¥">
		        </div>
		    </div>
		
		    <!-- 2ë²ˆì§¸ ì¤„ : PW / PW í™•ì¸ -->
		    <div class="form-row">
		        <div class="form-group">
		            <label for="userPw">PW</label>
		            <input type="password" id="userPw" name="userPw" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥">
		        </div>
		        <div class="form-group">
		            <label for="userRePw">PW í™•ì¸</label>
		            <input type="password" id="userRePw" name="userRePw" placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥">
		        </div>
		    </div>
		
		    <!-- 3ë²ˆì§¸ ì¤„ : ì´ë©”ì¼ / ìƒë…„ì›”ì¼ -->
		    <div class="form-row">
		        <div class="form-group">
		            <label for="userEmail">ì´ë©”ì¼</label>
		            <input type="text" id="userEmail" name="userEmail" placeholder="ì´ë©”ì¼ ì…ë ¥">
		        </div>
		        <div class="form-group">
		            <label for="userBirth">ìƒë…„ì›”ì¼</label>
		            <input type="text" id="userBirth" name="userBirth" placeholder="YYYYMMDD">
		        </div>
		    </div>
		
		    <!-- 4ë²ˆì§¸ ì¤„ : í†µì‹ ì‚¬ / íœ´ëŒ€í° ë²ˆí˜¸ -->
		    <div class="form-row">
		        <div class="form-group">
		            <label for="userTelTong">í†µì‹ ì‚¬</label>
		            <select id="userTelTong" name="userTelTong">
		                <option value="">í†µì‹ ì‚¬ ì„ íƒ</option>
		                <option value="SKT">SKT</option>
		                <option value="KT">KT</option>
		                <option value="LGU">LG U+</option>
		                <option value="SK7">SK 7ëª¨ë°”ì¼</option>
		                <option value="KTì•Œëœ°">KT ì•Œëœ°í°</option>
		                <option value="LGì•Œëœ°">LG ì•Œëœ°í°</option>
		            </select>
		        </div>
		        <div class="form-group">
		            <label for="userTelNo">í•¸ë“œí° ë²ˆí˜¸</label>
		            <input type="text" id="userTelNo" name="userTelNo" placeholder="01012345678">
		        </div>
		    </div>
		
		</div>
	
</div>

    <!-- í‘¸í„° -->
    <footer>
        Â© 2025 JSPJ Project. All rights reserved.
    </footer>

</body>
</html>